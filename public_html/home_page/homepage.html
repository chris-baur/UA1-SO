<!DOCTYPE HTML>
<html ng-app="myApp" ng-controller="mainCtrl">

  <head>
    <title>Ask It! Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../css/homepage.css">
    <?php $config = parse_ini_file('../../config.ini'); ?>
  </head>

  <body>  


    <p style="text-align: center;"><img src="../img/fill.png" alt="" width="1100" height="600" /></p>


    <!--Outputting the items in the database-->
    
    <?php
    $username = $config['username'];
    $password = $config['password'];
    $dbname = $config['dbname'];
    $servername = $config['servername'];

    // connection to database
    $con = mysqli_connect($servername, $username, $password, $dbname) or die("Connection Failed");

    $result = mysqli_query($con,"SELECT questions.*, accounts.username FROM questions AS questions INNER JOIN accounts ON accounts.id=questions.account_id ORDER BY upvotes DESC, downvotes");

    ?>

    <!-- goes through each element in the questions table and outputs it. The order of the output is sorted by most upvotes then least downvotes -->
    <?php while($row = mysqli_fetch_array($result,MYSQLI_ASSOC)) {?>
    
    <div class = "separator">
    <div class ="comment" align = "left">
        <h5><strong><?php echo $row["header"]?></strong></h5>
        <?php echo $row["content"]?><br>

        
        <!-- Output of the details of the comment and commenter -->
        <span class = "commentDetails">
            <?php echo "Created By: ".$row["username"]?><br>
            <?php echo "Posted on: ".$row["date"]?><br>
            <?php echo "Upvotes: ".$row["upvotes"]?>
            <?php echo "Downvotes: ".$row["downvotes"]?>
        </span>
    </div>
    </div>
    <?php }?>
    


  </body>

</html>